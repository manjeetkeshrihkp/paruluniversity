<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chapter 3 ‚Äì Multiple Integration Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#020617,#0f172a,#020617);color:#e5e7eb;padding:30px}
.container{max-width:1100px;margin:auto}
h1{font-size:2.6rem;margin-bottom:8px;background:linear-gradient(to right,#22c55e,#facc15);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.subtitle{color:#c7d2fe;margin-bottom:16px}
.timer{background:rgba(255,255,255,0.08);padding:8px 14px;border-radius:10px;display:inline-block;margin-bottom:18px}
.card{background:rgba(255,255,255,0.08);padding:28px;border-radius:20px;box-shadow:0 12px 30px rgba(0,0,0,0.4)}
.question{font-size:1.15rem;color:#7dd3fc;margin-bottom:16px}
.option{padding:14px 16px;margin-bottom:10px;border-radius:12px;background:rgba(0,0,0,0.45);cursor:pointer;transition:0.2s}
.option:hover{background:rgba(250,204,21,0.25)}
.correct{background:rgba(34,197,94,0.45)}
.wrong{background:rgba(239,68,68,0.45)}
input{width:100%;padding:12px;border-radius:10px;border:none;margin-bottom:12px}
button{padding:10px 18px;border:none;border-radius:12px;background:#22c55e;color:#000;font-weight:600;cursor:pointer}
button.secondary{background:#38bdf8}
.solution{display:none;margin-top:18px;background:rgba(250,204,21,0.15);border-left:4px solid #facc15;padding:16px;border-radius:12px;color:#fde68a}
.nav{margin-top:20px;text-align:right}
.end{text-align:center;padding:40px}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:18px;margin-top:25px}
.stat{background:rgba(255,255,255,0.08);padding:20px;border-radius:16px}
.stat h3{font-size:1.4rem;color:#22c55e}
.graph-wrap{display:flex;gap:30px;justify-content:center;flex-wrap:wrap;margin-top:30px}
.donut{width:180px;height:180px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem}
.bar{width:260px}
.bar-row{margin-bottom:12px}
.bar-label{font-size:0.9rem;color:#cbd5f5;margin-bottom:4px}
.bar-bg{height:10px;background:#1e293b;border-radius:10px;overflow:hidden}
.bar-fill{height:100%;border-radius:10px}
</style>
</head>
<body>
<div class="container">
<h1>Chapter 3 ‚Äì Multiple Integration</h1>
<p class="subtitle">üòµDouble Integrals & Applications</p>
<div class="timer" id="timerBox">‚è± Question Time: <span id="qt">0</span> sec</div>

<div class="card" id="card"></div>
<div class="nav"><button id="nextBtn">Next</button></div>
</div>

<script>
/* ================= STATE ================= */
let qSeconds=0,qTimer=null;
let correct=0,wrong=0,skipped=0,totalTime=0,i=0;
let answered=false;

const card=document.getElementById('card');
const nextBtn=document.getElementById('nextBtn');

/* ================= TIMER ================= */
function startQT(){qSeconds=0;if(qTimer)clearInterval(qTimer);qTimer=setInterval(()=>{qt.innerText=++qSeconds},1000)}

/* ================= QUESTIONS ================= */
const questions=[
  {type:'mcq',q:'Value of ‚à¨ 1 dx dy over 0‚â§x‚â§2, 0‚â§y‚â§3 is:',opts:['5','6','8','10'],ans:1,sol:'Area = 2√ó3 = 6.'},
  {type:'mcq',q:'‚à´‚ÇÄ¬π‚à´‚ÇÄ¬≤ x dy dx equals:',opts:['1','2','3','4'],ans:0,sol:'Inner gives 2x, outer gives ‚à´‚ÇÄ¬π2x dx = 1.'},
  {type:'mcq',q:'dx dy in polar coordinates becomes:',opts:['r dr dŒ∏','dr dŒ∏','r¬≤dr dŒ∏','dŒ∏ dr'],ans:0,sol:'Jacobian is r.'},
  {type:'mcq',q:'Region x¬≤+y¬≤‚â§a¬≤ in polar form is:',opts:['0‚â§r‚â§a','0‚â§Œ∏‚â§a','0‚â§r‚â§2a','0‚â§Œ∏‚â§œÄ'],ans:0,sol:'Circle radius a.'},
  {type:'mcq',q:'Area of circle using double integral is:',opts:['œÄr','2œÄr','œÄr¬≤','2œÄr¬≤'],ans:2,sol:'Area = œÄr¬≤.'},
  {type:'num',q:'Evaluate ‚à¨ (x+y) dx dy over 0‚â§x‚â§1, 0‚â§y‚â§2.',ans:'3',sol:'Integrate w.r.t y.\nThen integrate w.r.t x.\nFinal value = 3.'}
];

/* ================= SOLUTION ================= */
function renderSolution(sol){const steps=sol.split('\n');let h='<div style="font-weight:600;color:#facc15;margin-bottom:10px">Step-by-step Solution</div>';steps.forEach((s,i)=>{h+=`<div style="background:rgba(0,0,0,0.35);padding:10px;border-left:3px solid #22c55e;border-radius:8px;margin-bottom:8px">Step ${i+1}: ${s}</div>`});return h}

/* ================= LOAD ================= */
function load(){answered=false;startQT();const q=questions[i];card.innerHTML=`<div class='question'>Q${i+1}. ${q.q}</div>`;
if(q.type==='mcq'){q.opts.forEach((o,idx)=>{const d=document.createElement('div');d.className='option';d.innerText=o;d.onclick=()=>selectMCQ(idx,d);card.appendChild(d)})}
else{const inp=document.createElement('input');inp.id='ans';inp.placeholder='Write final answer only';card.appendChild(inp);const b=document.createElement('button');b.innerText='Submit';b.onclick=checkNum;card.appendChild(b)}
const sol=document.createElement('div');sol.id='sol';sol.className='solution';card.appendChild(sol)}

/* ================= ANSWER ================= */
function selectMCQ(idx,el){if(answered)return;answered=true;clearInterval(qTimer);totalTime+=qSeconds;const q=questions[i];document.querySelectorAll('.option').forEach(o=>o.style.pointerEvents='none');const sol=document.getElementById('sol');
if(idx===q.ans){el.classList.add('correct');correct++;sol.innerHTML='<b style="color:#22c55e">‚úî Correct</b>'}
else{el.classList.add('wrong');wrong++;sol.innerHTML='<b style="color:#ef4444">‚úñ Wrong</b>'+renderSolution(q.sol)}sol.style.display='block'}

function checkNum(){if(answered)return;answered=true;clearInterval(qTimer);totalTime+=qSeconds;const q=questions[i];const v=ans.value.replace(/\s/g,'');const sol=document.getElementById('sol');
if(v===q.ans){ans.style.border='2px solid #22c55e';correct++;sol.innerHTML='<b style="color:#22c55e">‚úî Correct</b>'}
else{ans.style.border='2px solid #ef4444';wrong++;sol.innerHTML='<b style="color:#ef4444">‚úñ Wrong</b>'+renderSolution(q.sol)}sol.style.display='block'}

/* ================= NEXT ================= */
nextBtn.onclick=()=>{if(!answered)skipped++;if(i<questions.length-1){i++;load()}else endTest()}

/* ================= END ================= */
function endTest(){clearInterval(qTimer);timerBox.style.display='none';const total=questions.length;const acc=Math.round((correct/total)*100);
const cPct=(correct/total)*100;const wPct=(wrong/total)*100;const sPct=(skipped/total)*100;
nextBtn.style.display='none';

card.innerHTML=`<div class='end'><h2>üéâ Test Completed</h2>
<div class='stats-grid'>
<div class='stat'><h3>${correct}</h3><p>Correct</p></div>
<div class='stat'><h3>${wrong}</h3><p>Wrong</p></div>
<div class='stat'><h3>${skipped}</h3><p>Skipped</p></div>
<div class='stat'><h3>${totalTime}s</h3><p>Total Time</p></div>
<div class='stat'><h3>${acc}%</h3><p>Accuracy</p></div>
</div>
<div class='graph-wrap'>
<div class='donut' style="background:conic-gradient(#22c55e ${cPct}%, #ef4444 ${cPct}% ${cPct+wPct}%, #64748b ${cPct+wPct}% 100%)">${acc}%</div>
<div class='bar'>
<div class='bar-row'><div class='bar-label'>Correct</div><div class='bar-bg'><div class='bar-fill' style='width:${cPct}%;background:#22c55e'></div></div></div>
<div class='bar-row'><div class='bar-label'>Wrong</div><div class='bar-bg'><div class='bar-fill' style='width:${wPct}%;background:#ef4444'></div></div></div>
<div class='bar-row'><div class='bar-label'>Skipped</div><div class='bar-bg'><div class='bar-fill' style='width:${sPct}%;background:#64748b'></div></div></div>
</div></div>
<button class='secondary' style='margin-top:25px' onclick="location.href='calculus.html'">Go to Chapter 4</button></div>`}

window.addEventListener('DOMContentLoaded',load);
</script>
</body>
</html>
